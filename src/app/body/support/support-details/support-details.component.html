<div class="back mt-5 pt-5 pb-5">
    <h1 class="text-center pt-3">Global Support Request Details</h1>
    <div class="container mt-3" *ngIf="supportService.support">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Ticket Id: </h6>
                        </div>
                        <div class="col-sm-3 mb text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.TicketId"
                                disabled />
                        </div>
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Type: </h6>
                        </div>
                        <div class="col-sm-5 text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.SupportType"
                                disabled />
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Opened By:</h6>
                        </div>
                        <div class="col-sm-3 mb text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.Name"
                                disabled />
                        </div>
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Opened</h6>
                        </div>
                        <div class="col-sm-5 text-secondary">
                            <input type="text" class="form-control" readonly="readonly"
                                value="{{supportService.support.Date}} {{supportService.support.Time}}" disabled />

                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Status</h6>
                        </div>
                        <div class="col-sm-3 mb text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.State"
                                disabled />
                        </div>
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Assigned To</h6>
                        </div>
                        <div class="col-sm-5 text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.AssignedTo"
                                disabled />

                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-2">
                            <h6 class="mb-0 pt-2">Description </h6>
                        </div>
                        <div class="col-sm-10 mb text-secondary">
                            <input type="text" class="form-control" [(ngModel)]="supportService.support.Message"
                                disabled />
                        </div>
                    </div>

                    <div class="row pt-5 mt-4 text-center">
                        <div class="col-1"></div>
                        <div class="col-md-10 col-10">
                            <div class="card-title">
                                <h2> <b>Support Chat</b></h2>
                            </div>
                            <div class="containeri P-1">
                                <div class="chatbox">
                                    <div *ngFor="let activity of activityService.activities">
                                        <div *ngIf="activity.Sendor=='user'">
                                            <div class="chat chatReverse">
                                                <img src="{{authService.user.photoURL}}"
                                                    onerror="this.src = '../../assets/defaultavatar.jpg'" alt="">
                                                <p class="msg">
                                                    {{activity.Message}}
                                                </p>
                                            </div>
                                        </div>
                                        <div *ngIf="activity.Sendor=='admin'">
                                            <div class="chat">
                                                <img src="../../../../assets/gcpa_logo.jpeg" alt="" class="supportImage rounded-circle"/>
                                                <p class="msg">
                                                    {{activity.Message}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="input-group mt-3">
                                        <input type="text" class="form-control" placeholder="Type Your Message Here"
                                            aria-describedby="button-addon2" [ngModelOptions]="{standalone: true}"
                                            [(ngModel)]="messageSent">
                                        <button class="btn btn-outline-secondary text-center" type="button" id="button-addon2"
                                            (click)="sendMessage(supportService.support.TicketId)">
                                            <mat-icon class="align-middle" aria-hidden="false" id="send">send</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-1"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>